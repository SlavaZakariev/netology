## 12.7 Репликация и масштабирование. Часть 2 - Вячеслав Закариев

### Задание 1

Опишите основные преимущества использования масштабирования методами:

- активный master-сервер и пассивный репликационный slave-сервер; 
- master-сервер и несколько slave-серверов;
- активный сервер со специальным механизмом репликации — distributed replicated block device (DRBD);
- SAN-кластер.

*Дайте ответ в свободной форме.*

---

### Решение 1

**- активный master-сервер и пассивный репликационный slave-сервер**

Данный метод относят к горизонтальному масштабированию, где есть основной master-сервер принимающий запросы на чтение и запись данных, а также, копия slave-сервер, который принимает запросы на чтение данных. Данный метод увеличивает производительность на чтение, так как разгружает master-сервер, в дополнение обеспечивает хоть и минимальную, но всё же отказоустойчивость за счёт slave-сервера, и случае аварийного падения master-сервера, минимизирует простой доступности сервиса, за счёт того, что не нужно ждать пока будет восстановлена резервная копия master-сервера, достаточно всего лишь сделать переключение роли slave-сервера на роль master-сервера.

**- master-сервер и несколько slave-серверов**

Данный метод, обеспечивает дополнительную производительность за счёт большего количества slave-серверов на запросы на чтение данных. В данном методе есть сложность в настройке общей схемы для обеспечения синхронизации всех slave-серверов, а также возрастает дополнительная нагрузка не сетевую инфраструктуру.
  
**- активный сервер со специальным механизмом репликации — distributed replicated block device (DRBD)**

Данный метод обеспечивает повышенную отказоустойчивость, так как реализация DRBD заключается в зеркальном отображении всего устройства по сети. Что в свою очередь предоставляет пользователю установить в реальном времени зеркальное отображение локального блочного устройства на удаленной машине, в сочетании с контрольным соединением. Данная схема напоминает работу дискового массива, который позволяет пользователю установить в реальном времени по сети зеркалирование локального блочного устройства.

**- SAN-кластер**

Самый производительный и надёжный метод масштабирования, но в то же время сложный и дорогой. Для высоконагруженных систем, требующих доступности 24/7, данный метод является самым подходящим. Преимущество в том, данный метод предоставляет высокую производительность на аппаратном уровне, высокую отказоустойчивость за счёт возможности горячей замены той же аппаратной части и дополнении, данный метод можно построить так, что будет возможность вертикально масштабировать данную схему за счёт подключение дополнительных нод аппаратного части серверных и сетевых устройств. На сегодняшний день, многие ЦОД работают по такой схеме для возможности обеспечение 24/7/365 для своих сервисов.

---

### Задание 2

Разработайте план для выполнения горизонтального и вертикального шаринга базы данных. База данных состоит из трёх таблиц: 

- пользователи, 
- книги, 
- магазины (столбцы произвольно). 

Опишите принципы построения системы и их разграничение или разбивку между базами данных.

*Пришлите блоксхему, где и что будет располагаться. Опишите, в каких режимах будут работать сервера.* 

---

### Решение 2

Вертикальный шардинг

- Разделили 3 таблицы USER, BOOKS и STORES на разные 3 базы данных.

![rep2.1](https://github.com/SlavaZakariev/netology/blob/ca663aaf103fa0fbac549373c3db2bce7d3ed7fb/db/12.7_replication_part2/resources/repl_2.1.jpg)

Горизонтальный шардинг

- Разделили 3 таблицы USER, BOOKS и STORES на разные 6 серверов.
- Таблица USER - вынесены объёмные графические данные (+столбцы с ключами) в отдельную БД на отдельный сервер, имя и фамилия (+столбцы с ключами) на другой сервер
- Таблица BOOKS - масштабирована за счёт разделения названий книг по алфавиту от A до М в одну БД на отдельный сервер, от M до Z на другую на отдельный сервер.
- Таблица STORES - масштабирована по аналогии с таблицей BOOKS, за счёт разделения названий магазинов по алфавиту от A до М в одну БД на отдельный сервер, от M до Z на другую на отдельный сервер.

![rep2.2](https://github.com/SlavaZakariev/netology/blob/0f226ba4b67f77871b0ff5510a282e8c32642982/db/12.7_replication_part2/resources/repl_2.2.jpg)


