## 21.1 Введение в микросервисы - Вячеслав Закариев

### Задача

Руководство крупного интернет-магазина, у которого постоянно растёт пользовательская база и количество заказов, рассматривает возможность переделки своей внутренней ИТ-системы на основе микросервисов. Вас пригласили в качестве консультанта для оценки целесообразности перехода на микросервисную архитектуру.

Опишите, какие выгоды может получить компания от перехода на микросервисную архитектуру и какие проблемы нужно решить в первую очередь.

---

### Решение

**Предположим ситуацию в текущей инфраструктуре:**

Текущая реализация интернет-магазина ОДЕЖДА.РФ представляет из себя приложение, разработанное по монолитной архитектуре с использованием ASP.NET MVC и Microsoft SQL Server, которое имеет ограниченные возможности с точки зрения поддержки, внесения изменений и развития. Возможности масштабирования приложения ограничены горизонтальным направлением с помощью добавления физических серверов за балансировщиком нагрузки. Это приводит к следующим ключевым недостатки:

- Любые изменения, требуют переборки и развертывания всего приложения
- Высокая связность программных модулей
- Отсутствие возможности гибкого тестирования компонентов
- Ограниченная масштабируемость и надежность

**Плюсы от перехода на микросервисную архитектуру:**

При разработке информационных бизнес-систем существует целый ряд решений, разработку которых целесообразно проводить на сервисных платформах. Это позволяет использовать функционал централизации управления
платформы приложений, которые в свою очередь разделены на сервисы, также это позволит применить контейнеризацию компонентов, внедрить встроенную стандартную аутентификацию и авторизацию, что позволит в свою очередь разграничить права доступа. 

Таким образом, за счет централизации и выработки правил эксплуатации решения, можно будет:
- Получить более высокий уровень отказоустойчивости и безопасности систем
- Получить независимо развивающиеся друг от друга сервисы для более гибкого подхода разработки
- Получить гибкое тестирование систем конкретного сервиса не затрагиваю другие компоненты
- Получить преимущества различных систем разработки и интеграции и применить их в соответствующих микросервисах
- Получить инструменты автоматического масштабирования мощности при пиковых значениях
- Получить возможность частого обновления приложения, что ведёт к более быстрой реакции и устранению "багов" приложения

**Минусы от перехода на микросервисную архитектуру:**

Для перехода от монолитного текущего решения на микросервисную архитектуру, необходимо учесть следующие аспекты:

- Разработка архитектуры и документации с учётом всех текущих работающих сервисов и планируемой серверной платформы, на которой будет планироваться разворачивание, тестирование и последующая миграция данных
- План финансовых расходов на инфраструктуру и команду для проекта разработки, поддержки и миграции сервисов
- Дорожная карта со сроками реализации проекта, начиная от приобретения инфраструктуры, разработки, разворачивания, тестирования и дальнейшей миграции сервисов
- Увеличение затрат на поддержку микросервисной инфраструктуры, применение различных технологий микросервисов потребует от команды поддержки большего профессионализма, навыков и опыта
- Потребуются внедрения систем управления конфигурациями, система хранения артефактов и репозитории для каждого из микросервиса
- Настройка автоматизации выполнения сборок средствами CI/CD и тестирование результатов разворачивания сервисов
- Переход с монолитной системы на микросервисы может занять большое количество времени и финансовых затрат на команду миграции
